<button
  type="button"
  class="btn-close close pull-right"
  (click)="bsModalRef.hide()"
>
  <span aria-hidden="true" class="visually-hidden">×</span>
</button>
<div class="container-fluid px-1 py-5 mx-auto">
  <div class="row d-flex justify-content-center px-5">
    <div class="col-12">
      {{ _fotoSeleccionada?.name }}
    </div>
    <div class="col-8 card">
      <div class="form-group">
        <div class="container">
          <form [formGroup]="stateForm">
            <mat-form-field>
              <input
                type="text"
                matInput
                placeholder="Nombre de la etiqueta"
                formControlName="stateGroup"
                required
                [matAutocomplete]="autoGroup"
                #etiqueta
              />
              <mat-autocomplete #autoGroup="matAutocomplete">
                <mat-optgroup
                  *ngFor="let group of stateGroupOptions | async"
                  [label]="group.letter"
                >
                  <mat-option *ngFor="let name of group.names" [value]="name">
                    {{ name }}
                  </mat-option>
                </mat-optgroup>
              </mat-autocomplete>
            </mat-form-field>
            <button
              class="btn btn-success"
              (click)="agregaEtiqueta(etiqueta.value)"
            >
              Agregar
            </button>
          </form>
        </div>
      </div>
    </div>

    <h2 *ngIf="!etiquetas.length">Esta foto todavía no se ha etiquetado</h2>
    <ng-container *ngIf="etiquetas.length">
      <div class="form-group flex-column d-flex">
        <label class="form-control-label pl-2">Etiquetas:</label>
        <ul *ngIf="etiquetas.length" class="ulEtiquetas">
          <li *ngFor="let etiqueta of etiquetas; let i = index">
            {{ etiqueta.name }}
            <button class="btn test" (click)="borrarEtiqueta(etiqueta._id, i)">
              X
            </button>
          </li>
        </ul>
      </div>
    </ng-container>
  </div>
  <div class="col-1"></div>
  <div class="col-3 card">
    <img
      class="img-fluid imgEtiquetada"
      [src]="urlImg + _fotoSeleccionada?.id"
      [alt]="fotoSeleccionada?.name"
    />
  </div>
</div>
